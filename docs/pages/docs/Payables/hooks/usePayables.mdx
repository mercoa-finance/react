---
title: usePayables Hook
description: The `usePayables` hook provides access to Payables data, filtering, pagination, selection, and actions within the `Payables` part, now supporting custom status tab groupings.
---

# usePayables

The `usePayables` hook works inside the children of the `<Payables>` component. It provides access to payables data, filtering capabilities, pagination controls, row selection, action handlers, and now supports advanced customization of status tabs via the `customStatuses` prop.

> **New in v0.1.8:**  
> Use the `customStatuses` prop to group many statuses under custom labels, enabling highly flexible dashboard and workflow views.

## Props

The props for `usePayables` match those of [`Payables`](./Payables), as it's designed for its context.

### `customStatuses` Prop

The `customStatuses` prop enables you to customize the set of status tabs shown in the payables dashboard or table.

**Type:**

```ts
type CustomStatusGroup = {
  label: string;
  statuses: InvoiceStatus[];
};

customStatuses?: CustomStatusGroup[];
```

- `label`: The label to display on the tab.
- `statuses`: Array of one or more `InvoiceStatus` enum values that this tab represents.

**Accepted values for `statuses`:**  
Any valid `InvoiceStatus` enum value, such as `'draft'`, `'approved'`, `'pending'`, `'paid'`, etc.

**Where's it supported?**
- `Payables` part (as a prop, often within `displayOptions`)
- `PayablesDashboard`
- `ReceivablesDashboard`
- `StatusTabs`
- `usePayables` hook (via `propsContextValue`)

**Example usage:**

```tsx
import { Payables, InvoiceStatus } from '@mercoa/react';

const customStatuses = [
  {
    label: 'Open',
    statuses: [InvoiceStatus.Pending, InvoiceStatus.Approved],
  },
  {
    label: 'Completed',
    statuses: [InvoiceStatus.Paid, InvoiceStatus.Reconciled],
  },
  {
    label: 'Drafts',
    statuses: [InvoiceStatus.Draft],
  },
];

<Payables
  displayOptions={{
    customStatuses,
    // ...other display options
  }}
>
  {/* Your custom content */}
</Payables>
```

This renders status tabs "Open," "Completed," and "Drafts," each showing invoices matching the grouped statuses.

---

## Return Type

| Name                     | Type                                                        | Description                                        |
| :----------------------- | :---------------------------------------------------------- | :------------------------------------------------- |
| `dataContextValue`       | [`PayablesDataContext`](#payables-data-context)             | Provides payables data and loading states          |
| `filtersContextValue`    | [`PayablesFilterContext`](#payables-filter-context)         | Manages filtering options                          |
| `paginationContextValue` | [`PayablesPaginationContext`](#payables-pagination-context) | Controls pagination and sorting                    |
| `selectionContextValue`  | [`PayablesSelectionContext`](#payables-selection-context)   | Handles row selection and column visibility        |
| `actionsContextValue`    | [`PayablesActionContext`](#payables-action-context)         | Manages payable actions like approve, delete, etc. |
| `propsContextValue`      | `PayablesProps`                                             | Access to the original props passed to `Payables`, including `customStatuses` if provided  |

> **Note:**  
> If you pass `customStatuses` to the `Payables` part (or via `displayOptions`), it's accessible inside your custom components via `propsContextValue.customStatuses` in the hook.

---

<a id="payables-data-context"></a>
### Data Context (`dataContextValue`)

| Name                    | Type                               | Description                       |
| :---------------------- | :--------------------------------- | :-------------------------------- |
| `infiniteData`          | `any`                              | Raw infinite query data           |
| `tableData`             | `Array<PayableTableRow>`           | Formatted table data              |
| `allFetchedInvoices`    | `Mercoa.InvoiceResponse[]`         | All fetched invoice data          |
| `totalItems`            | `number`                           | Total number of items             |
| `totalEntries`          | `number`                           | Total number of entries           |
| `recurringPayableData`   | `Mercoa.InvoiceTemplateResponse[]` | Recurring payable data           |
| `metricsData`           | `Mercoa.InvoiceMetricsResponse[]`  | Metrics data                      |
| `approvalPolicies`      | `Mercoa.ApprovalPolicyResponse[]`  | Approval policies                 |
| `statusTabsMetrics`     | `any`                              | Metrics for status tabs           |
| `isFetching`            | `boolean`                          | Whether the system is fetching data     |
| `isLoading`             | `boolean`                          | Whether initial load is happening |
| `isError`               | `boolean`                          | Whether an error occurred         |
| `handleRefresh`         | `() => void`                       | Function to refresh data          |

---

<a id="payables-filter-context"></a>
### Filter Context (`filtersContextValue`)

| Name                 | Type                                  | Description                       |
| :------------------- | :------------------------------------ | :-------------------------------- |
| `currentStatuses`    | `Mercoa.InvoiceStatus[]`              | Now selected status filters |
| `setCurrentStatuses` | `(statuses: InvoiceStatus[]) => void` | Sets status filters               |
| `search`             | `string`                              | Search query string               |
| `setSearch`          | `(search: string) => void`            | Sets search query                 |
| `startDate`          | `Date \| undefined`                   | Start date filter                 |
| `setStartDate`       | `(date: Date \| undefined) => void`   | Sets start date filter            |
| `endDate`            | `Date \| undefined`                   | End date filter                   |
| `setEndDate`         | `(date: Date \| undefined) => void`   | Sets end date filter              |

---

<a id="payables-pagination-context"></a>
### Pagination Context (`paginationContextValue`)

| Name               | Type                         | Description                        |
| :----------------- | :--------------------------- | :--------------------------------- |
| `orderBy`          | `Mercoa.InvoiceOrderByField` | Current sort field                 |
| `orderDirection`   | `Mercoa.OrderDirection`      | Current sort direction             |
| `resultsPerPage`   | `number`                     | Number of results per page         |
| `page`             | `number`                     | Current page number                |
| `goToNextPage`     | `() => void`                 | Go to next page                    |
| `goToEarlierPage` | `() => void`                 | Go to earlier page                |
| `isNextDisabled`   | `boolean`                    | Whether next page is available     |
| `isPrevDisabled`   | `boolean`                    | Whether earlier page is available     |

---

<a id="payables-selection-context"></a>
### Selection Context (`selectionContextValue`)

| Name                   | Type                                   | Description                    |
| :--------------------- | :------------------------------------- | :----------------------------- |
| `selectedInvoiceIds`   | `string[]`                             | Now selected invoice IDs |
| `isAllSelected`        | `boolean`                              | Selects all items                    |
| `handleSelectAll`      | `() => void`                           | Selects/deselects all items    |
| `handleSelectRow`      | `(invoiceId: string) => void`          | Selects/deselects a single row |
| `selectedColumns`      | `InvoiceTableColumn[]`                 | Visible columns                |
| `toggleSelectedColumn` | `(column: InvoiceTableColumn) => void` | Toggles column visibility      |

---

<a id="payables-action-context"></a>
### Action Context (`actionsContextValue`)

| Name                    | Type                    | Description                             |
| :---------------------- | :---------------------- | :-------------------------------------- |
| `deletePayable`         | `UseMutateFunction`     | Delete single payable                   |
| `bulkDeletePayables`    | `UseMutateFunction`     | Delete many payable                    |
| `schedulePayment`       | `UseMutateFunction`     | Schedule payment for single payable     |
| `bulkSchedulePayment`   | `UseMutateFunction`     | Schedule payments for many payable |
| `approvePayable`        | `UseMutateFunction`     | Approve single payable                  |
| `bulkApprovePayables`   | `UseMutateFunction`     | Approve many payables                  |
| `downloadInvoicesAsCSV` | `() => void`            | Download invoices as CSV                |
| `activeInvoiceAction`   | `PayableAction \| null` | Now active invoice action         |

---

## Example Usage

```tsx
import { Payables, usePayables, InvoiceStatus } from '@mercoa/react'

// Example: Custom status groups for the dashboard
const customStatuses = [
  {
    label: 'Active',
    statuses: [InvoiceStatus.Pending, InvoiceStatus.Approved],
  },
  {
    label: 'Archived',
    statuses: [InvoiceStatus.Paid, InvoiceStatus.Reconciled],
  },
]

const CustomPayablesTableContent = () => {
  const {
    dataContextValue: { tableData, isLoading },
    selectionContextValue: { selectedInvoiceIds, handleSelectRow },
    paginationContextValue: { goToNextPage, isNextDisabled },
    propsContextValue: { displayOptions },
  } = usePayables()

  // Access customStatuses if needed
  const statusTabs = displayOptions?.customStatuses

  if (isLoading) return <div>Loading...</div>

  return (
    <div>
      {statusTabs && (
        <div>
          <strong>Status Tabs:</strong>
          {statusTabs.map(({ label }) => (
            <span key={label} style={{ marginRight: 8 }}>{label}</span>
          ))}
        </div>
      )}
      <table>
        <tbody>
          {tableData.map((row) => (
            <tr
              key={row.id}
              onClick={() => handleSelectRow(row.id)}
              className={selectedInvoiceIds.includes(row.id) ? 'selected' : ''}
            >
              <td>{row.invoiceNumber}</td>
              <td>{row.amount}</td>
              <td>{row.status}</td>
            </tr>
          ))}
        </tbody>
      </table>
      <button onClick={goToNextPage} disabled={isNextDisabled}>
        Next Page
      </button>
    </div>
  )
}

// Wrapper component that provides the Payables context with customStatuses
const CustomPayablesTable = () => {
  return (
    <Payables displayOptions={{ customStatuses }}>
      <CustomPayablesTableContent />
    </Payables>
  )
}
```

This example demonstrates how to use the `usePayables` hook with custom status tabs using the `customStatuses` prop, enabling you to group and label invoice statuses as needed for your workflow.

---

> **See also:**  
> The [`Payables` props documentation](./Payables) for a full reference of available props, including `customStatuses`.  
>  
> **Note:** if `customStatuses` isn't documented there, refer to the structure in the preceding section; it's fully supported as of v0.1.8.
